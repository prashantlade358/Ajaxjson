<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <script type="text/javascript">
      $('#exampleModal').on('show.bs.modal', function (event) {
  var button = $(event.relatedTarget) // Button that triggered the modal
  var recipient = button.data('whatever') // Extract info from data-* attributes
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var modal = $(this)
  modal.find('.modal-title').text('New message to ' + recipient)
  modal.find('.modal-body input').val(recipient)
})

//Code of Json Ajax with tabs
function loadData(indexval) {
  var artistname = document.getElementById('artist-name').value;
  var nooftracks = document.getElementById('no-of-tracks').value;
  var data_file = "http://itunes.apple.com/search?term="+artistname+"&limit="+nooftracks;
  $('#exampleModal').modal('hide');
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    var jsonObj = JSON.parse(this.responseText);
     document.getElementById("search-main").innerHTML ='<center><table><tr><th>Artist :</th><td>'+jsonObj.results[indexval].artistName+'</td></tr><tr><th>Track :</th><td>'+jsonObj.results[indexval].trackName+'</td></tr></table></center>';
     
    }
  };
  //xhttp.open("GET", "http://itunes.apple.com/search?term=jack&limit=4", true);
  xhttp.open("GET", data_file, true);
  xhttp.send();
}


//COde Of Json Ajax
function loadDoc() {
  var artistname = document.getElementById('artist-name').value
  var nooftracks = document.getElementById('no-of-tracks').value
  var data_file = "http://itunes.apple.com/search?term="+artistname+"&limit="+nooftracks;
  $('#exampleModal').modal('hide');
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
    var jsonObj = JSON.parse(this.responseText);
    document.getElementById("tabs").innerHTML ='<div class="container"><ul class="nav nav-tabs"><li class="active"><a onclick="loadData(0)">'+artistname+'</a></li><li><a onclick="loadData(1)">'+artistname+'</a></li><li><a onclick="loadData(2)">'+artistname+'</a></li><li><a onclick="loadData(3)">'+artistname+'</a></li></ul></div>';
     document.getElementById("search-main").innerHTML ='<center><table><tr><th>Artist :</th><td>'+jsonObj.results[0].artistName+'</td></tr><tr><th>Track :</th><td>'+jsonObj.results[0].trackName+'</td></tr></table></center>';
     //document.getElementById("search-main").innerHTML = jsonObj.results[0].trackName;
    }
  };
  //xhttp.open("GET", "http://itunes.apple.com/search?term=jack&limit=4", true);
  xhttp.open("GET", data_file, true);
  xhttp.send();
}
</script>

    <title>Ajax Assignment</title>
  </head>
  <body>

  <!-- The First Page Code -->
  <div class="tabs" id="tabs">
  </div>
  <div class="search-main" id="search-main">
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Searh Artist</button>
  </div>
  <!-- The First Page Code End -->
  </div>

<!-- Modal Page Code -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Search Artist</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="artist-name" class="col-form-label">Name:</label>
            <input type="text" class="form-control" id="artist-name">
          </div>
          <div class="form-group">
            <label for="no-of-tracks" class="col-form-label">No. of Tracks:</label>
            <input type="text" class="form-control" id="no-of-tracks">
          </div>
        </form>
      </div>
      <div class="modal-footer1">
        <button type="button" class="btn btn-primary" onclick="loadDoc()">Search</button>
      </div>
    </div>
  </div>
</div>

<!--Modal Page Code Exit-->

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  
  
  </body>
</html>
